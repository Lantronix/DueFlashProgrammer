window.xpw=function(){function e(e){for(var n=[],t=0,a=e.length;a>t;t++){var s=Number(e.charCodeAt(t)).toString(16);s.length<2&&(s="0"+s),2==s.length&&n.push(s)}return n.join("")}function n(e){for(var n=e.toString(),t="",a=0;a<n.length;a+=2)t+=String.fromCharCode(parseInt(n.substr(a,2),16));return t}function t(e){var n=document.createElement("div");return n.innerHTML=e,n.innerText?n.innerText:n.textContent}function a(e){return e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;")}var s='<?xml version="1.0" standalone="yes"?><!-- Automatically generated XML --><!DOCTYPE configrecord [  <!ELEMENT configrecord (configgroup+)><!ELEMENT configgroup (configitem+)><!ELEMENT configitem (value+)><!ELEMENT value (#PCDATA)><!ATTLIST configrecord version CDATA #IMPLIED><!ATTLIST configgroup name CDATA #IMPLIED><!ATTLIST configgroup instance CDATA #IMPLIED><!ATTLIST configitem name CDATA #IMPLIED><!ATTLIST configitem instance CDATA #IMPLIED><!ATTLIST value name CDATA #IMPLIED>]><configrecord version = "0.1.0.1">',o={serialTransmit:function(n){if("undefined"!=typeof n){var t="1"==n.line||"2"==n.line?n.line:"1";if("undefined"==typeof n.message)return void("undefined"!=typeof n.done&&n.done({success:!1,error:"No Message to send"}));var a="group=Line&optionalGroupInstance=";a+=t,a+="&optionalItem=Transmitter&action=Hex Transmit ",a+=String(e(n.message));var s=new XMLHttpRequest;"undefined"!=typeof n.done&&(s.onreadystatechange=function(){4==s.readyState&&(200==s.status?n.done({success:!0}):n.done({success:!1}))}),s.open("POST","/action/status",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(a)}},serialReceive:function(e){if("undefined"!=typeof e){var t="1"==e.line||"2"==e.line?e.line:"1",a="group=Line&optionalGroupInstance=";a+=t,a+="&optionalItem=Receiver&action=Hex Receive";var s=new XMLHttpRequest;"undefined"!=typeof e.done&&(s.onreadystatechange=function(){if(4==s.readyState)if(200==s.status){var t=s.responseXML,a=t.getElementsByTagName("message"),o=t.getElementsByTagName("result");if("Succeeded"==o[0].childNodes[0].nodeValue){var i="";a[0]&&a[0].childNodes.length>0&&(i=a[0].childNodes[0].nodeValue,i=i.replace(/\s+/g,""),i=n(i)),e.done({success:!0,message:i})}else e.done({success:!1})}else e.done({success:!1})}),s.open("POST","/action/status",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(a)}},serialTransact:function(t){if("undefined"!=typeof t){var a="1"==t.line||"2"==t.line?t.line:"1";if("undefined"==typeof t.message)return void("undefined"!=typeof t.done&&t.done({success:!1,error:"No Message to send"}));var s="group=Line&optionalGroupInstance=";s+=a,s+="&action=Command ","undefined"!=typeof t.n&&(s+="n="+t.n+" "),"undefined"!=typeof t.m&&(s+="m="+t.m+" "),"undefined"!=typeof t.t&&(s+="t="+t.t+" "),s+=String(e(t.message));var o=new XMLHttpRequest;"undefined"!=typeof t.done&&(o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status){var e=o.responseXML,a=e.getElementsByTagName("message"),s=e.getElementsByTagName("result");if("Succeeded"==s[0].childNodes[0].nodeValue){var i="";a[0]&&a[0].childNodes.length>0&&(i=a[0].childNodes[0].nodeValue,i=i.replace(/\s+/g,""),i=n(i)),t.done({success:!0,message:i})}else t.done({success:!1})}else t.done({success:!1})}),o.open("POST","/action/status",!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(s)}},getLineConfig:function(e){if("undefined"!=typeof e){var n="1"==e.line||"2"==e.line?e.line:"1",t=new XMLHttpRequest;"undefined"!=typeof e.done&&(t.onreadystatechange=function(){if(4==t.readyState)if(200==t.status){for(var n={},a=t.responseXML,s=a.getElementsByTagName("configitem"),o=0;o<s.length;o++)s[o].getElementsByTagName("value")[0].childNodes.length>0&&(n[s[o].getAttribute("name")]=s[o].getElementsByTagName("value")[0].childNodes[0].nodeValue);e.done({success:!0,lineConfig:n})}else e.done({success:!1})});var a="optionalGroupList=Line:"+n;t.open("POST","/export/config",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(a)}},setLineConfig:function(e){if("undefined"!=typeof e&&"undefined"!=typeof e.line&&"undefined"!=typeof e.items){var n="1"==e.line||"2"==e.line?e.line:"1",t=new XMLHttpRequest,a=s+'<configgroup name = "Line" instance = "'+n+'">';for(var o in e.items)a+='<configitem name = "'+o+'"><value>'+e.items[o]+"</value></configitem>";a+="</configgroup></configrecord>";var i=new FormData;i.append("configrecord",a),"undefined"!=typeof e.done&&(t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var n=t.responseXML,a=n.getElementsByTagName("result");"Succeeded"==a[0].childNodes[0].nodeValue?e.done({success:!0}):e.done({success:!1})}}),t.open("POST","/import/config",!0),t.send(i)}},getGpioStatus:function(e){var n=new XMLHttpRequest;"undefined"!=typeof e.done&&(n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){for(var t=[],a=n.responseXML,s=a.getElementsByTagName("statusitem"),o=0;o<s.length;o++){var i={};if(i.gpio=s[o].getAttribute("instance"),s[o].getElementsByTagName("value").length>0)for(var r=0;r<s[o].getElementsByTagName("value").length;r++){var u=s[o].getElementsByTagName("value")[r].childNodes[0].nodeValue;switch(s[o].getElementsByTagName("value")[r].getAttribute("name")){case"Usage":i.isOutput="Output"==u,i.enabled="Output"==u||"Input"==u;break;case"Assert":i.assertLow="High"!=u;break;case"Value":i.isAsserted="1"==u}}t.push(i)}e.done({success:!0,status:t})}else e.done({success:!1})});var t="optionalGroupList=CPM CPs";n.open("POST","/export/status",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t)},setGpio:function(e){if("undefined"!=typeof e&&"undefined"!=typeof e.gpio&&"undefined"!=typeof e.command){var n="group=CPM CPs&optionalItem=CP&optionalItemInstance=";switch(n+=e.gpio+"&action=",e.command){case"disable":n+="Usage Unused";break;case"input":n+="Usage Input";break;case"output":n+="Usage Output";break;case"assert":n+="Value 1";break;case"unassert":n+="Value 0";break;case"assertHigh":n+="Assert High";break;case"assertLow":n+="Assert Low"}var t=new XMLHttpRequest;"undefined"!=typeof e.done&&(t.onreadystatechange=function(){if(4==t.readyState)if(200==t.status){var n=t.responseXML,a=n.getElementsByTagName("result");"Succeeded"==a[0].childNodes[0].nodeValue?e.done({success:!0}):e.done({success:!1})}else e.done({success:!1})}),t.open("POST","/action/status",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(n)}},startScan:function(){var e=new XMLHttpRequest;e.open("POST","/",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send("ajax=WLANScanSSID&ssid=&Scan=Scan&iehack=")},getScanResults:function(e){var n=new XMLHttpRequest;"undefined"!=typeof e.done&&(n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){for(var t=[],a=n.responseXML,s=a.getElementsByTagName("network"),o=0;o<s.length;o++){var i={};i.ssid=s[o].getElementsByTagName("ssid")[0].childNodes[0].nodeValue,i.bssid=s[o].getElementsByTagName("bssid")[0].childNodes[0].nodeValue,i.channel=s[o].getElementsByTagName("channel")[0].childNodes[0].nodeValue,i.rssi=s[o].getElementsByTagName("rssi")[0].childNodes[0].nodeValue,i.flags=s[o].getElementsByTagName("flags")[0].childNodes[0].nodeValue,t.push(i)}e.done({success:!0,networks:t})}else e.done({success:!1})});var t=new Date;n.open("GET","/ajax/quickconnect/results?"+t.getTime(),!0),n.send()},getWlanProfiles:function(e){var n=new XMLHttpRequest;"undefined"!=typeof e.done&&(n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){var t=[],a=n.responseXML;if(null==a)return void e.done({success:!1,profiles:[]});for(var s=a.getElementsByTagName("configgroup"),o=0;o<s.length;o++){var i={};i.name=s[o].getAttribute("instance"),t.push(i)}e.done({success:!0,profiles:t})}else e.done({success:!1,profiles:[]})}),n.open("POST","/export/config",!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send("optionalGroupList=WLAN Profile")},addWlanProfile:function(e){if("undefined"!=typeof e){var n=s+'<configgroup name="WLAN Profile" instance="'+e.network.ssid+'">';n+='<configitem name ="Basic"><value name="Network Name">'+t(e.network.ssid)+'</value><value name="State">Enabled</value></configitem><configitem name = "Security">',~e.network.flags.indexOf("WPA2")?(n+='<value name = "Suite">WPA2</value><value name = "WPAx Key Type">Passphrase</value><value name = "WPAx Passphrase">'+e.password+'</value><value name = "WPAx Encryption">',n+=~e.network.flags.indexOf("CCMP")?"CCMP</value>":"TKIP</value>"):~e.network.flags.indexOf("WPA")?n+='<value name = "Suite">WPA</value><value name = "WPAx Key Type">Passphrase</value><value name = "WPAx Passphrase">'+e.password+'</value><value name = "WPAx Encryption">TKIP</value>':~e.network.flags.indexOf("WEP")?(n+='<value name = "Suite">WEP</value><value name = "WEP Key Size">',n+=10==e.password.length?"40":"104",n+='</value><value name = "WEP TX Key Index">1</value><value name = "WEP Key 1 Key">'+e.password+"</value>"):n+='<value name = "Suite">None</value>',n+="</configitem></configgroup></configrecord>";var a=new XMLHttpRequest,o=new FormData;o.append("configrecord",n),"undefined"!=typeof e.done&&(a.onreadystatechange=function(){4==a.readyState&&(200==a.status?e.done({success:!0}):e.done({success:!1}))}),a.open("POST","/import/config",!0),a.send(o)}},deleteWlanProfile:function(e){if("undefined"!=typeof e){var n=s+'<configgroup name = "XML Import Control"><configitem name = "WLAN Profile delete"><value name="name">';n+=a(e.profile.name)+"</value></configitem></configgroup></configrecord>";var t=new XMLHttpRequest,o=new FormData;o.append("configrecord",n),"undefined"!=typeof e.done&&(t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.done({success:!0}):e.done({success:!1}))}),t.open("POST","/import/config",!0),t.send(o)}}};return o}();